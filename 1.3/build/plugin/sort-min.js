/*! autoResponsive - v1.3 - 2013-09-27 8:58:43 AM
* Copyright (c) 2013 xudafeng; Licensed  */
KISSY.add("gallery/autoResponsive/1.3/plugin/sort",function(e){"use strict";function t(e){return this instanceof t?(this._makeCfg(e),void 0):new t(e)}var n=e.DOM,i={};return e.augment(t,{init:function(t){var n=this;n.owner=t,n.actions=[],n.owner.on("beforeLocate",function(e){n.elms=e.autoResponsive.elms;for(var t=0;n.actions.length>t;t++)e.autoResponsive.actions.push(n.actions[t])}),e.log("plugin sort::init")},_makeCfg:function(e){e=i,this.config=e},changeCfg:function(t){this._makeCfg(e.merge(this.config,t))},random:function(){var e=this;e.clear(),e.actions.push(function(e){return parseInt(Math.random()*e.length)})},priority:function(t){var i=this,r=t.attrName||"data-priority",o=[],a=-1;e.each(i.elms,function(e){(t.dataAttr&&n.attr(e,r)==t.dataAttr||n.hasClass(e,t.classAttr))&&o.push(e)}),i.actions.push(function(t,n,i){return e.inArray(i[n],o)?(a++,a):t.length})},reverse:function(){var e=this;e.actions.push(function(){return 0})},filter:function(t){var i=this;i.clear();var r=t.attrName||"data-filter";i.actions.push(function(i,o,a){if(n.hasAttr(a[o],r)&&n.attr(a[o],r)==t.dataAttr)n.show(a[o]);else if(n.hasClass(a[o],t.classAttr))n.show(a[o]);else{if(!e.inArray(n.attr(a[o],r),t.dataAttr))return t.hide&&n.hide(a[o]),!0;n.show(a[o])}})},custom:function(e){var t=this;t.actions.push(e)},clear:function(){var e=this;e.actions=[]},restore:function(){var e=this;e.actions.pop()}}),t},{requires:["dom"]});